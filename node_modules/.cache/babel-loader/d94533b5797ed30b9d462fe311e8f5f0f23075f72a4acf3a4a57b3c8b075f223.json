{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nconst items = localStorage.getItem(\"cartItems\") !== null ? JSON.parse(localStorage.getItem(\"cartItems\")) : [];\nconst initialState = {\n  value: items\n};\nexport const cartItemsSlice = createSlice({\n  name: 'cartItems',\n  initialState,\n  reducers: {\n    addItem: (state, action) => {\n      const newItem = action.payload;\n      const duplicate = findItem(state.value, newItem);\n      if (duplicate.length > 0) {\n        state.value = delItem(state.value, newItem);\n        state.value = [...state.value, {\n          ...newItem,\n          id: duplicate[0].id,\n          quantity: newItem.quantity + duplicate[0].quantity\n        }];\n      } else {\n        state.value = [...state.value, {\n          ...newItem,\n          id: state.value.length > 0 ? state.value[state.value.length - 1].id + 1 : 1\n        }];\n      }\n      localStorage.setItem('cartItems', JSON.stringify(sortItems(state.value)));\n      console.log(state.value);\n    },\n    updateItem: (state, action) => {\n      const itemUpdate = action.payload;\n      const item = findItem(state.value, itemUpdate);\n      if (item.length > 0) {\n        state.value = delItem(state.value, itemUpdate);\n        state.value = [...state.value, {\n          ...itemUpdate,\n          id: item[0].id\n        }];\n        localStorage.setItem('cartItems', JSON.stringify(sortItems(state.value)));\n      }\n    }\n  }\n});\nconst findItem = (arr, item) => arr.filter(e => e.slug === item.slug && e.color === item.color && e.size === item.size);\nconst delItem = (arr, item) => arr.filter(e => e.slug !== item.slug || e.color !== item.color || e.size !== item.size);\nconst sortItems = arr => arr.sort((a, b) => a.id > b.id ? 1 : a.id < b.id ? -1 : 0);\nexport const {\n  addItem,\n  updateItem\n} = cartItemsSlice.actions;\nexport default cartItemsSlice.reducer;","map":{"version":3,"names":["createSlice","items","localStorage","getItem","JSON","parse","initialState","value","cartItemsSlice","name","reducers","addItem","state","action","newItem","payload","duplicate","findItem","length","delItem","id","quantity","setItem","stringify","sortItems","console","log","updateItem","itemUpdate","item","arr","filter","e","slug","color","size","sort","a","b","actions","reducer"],"sources":["C:/Users/DuongNguyen/Desktop/yolo/src/redux/shopping-cart/cartItemSlices.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst items = localStorage.getItem(\"cartItems\") !== null ? JSON.parse(localStorage.getItem(\"cartItems\")) : []\r\nconst initialState = { value: items }\r\nexport const cartItemsSlice = createSlice({\r\n    name: 'cartItems',\r\n    initialState,\r\n    reducers: {\r\n        addItem: (state, action) => {\r\n            const newItem = action.payload\r\n\r\n            const duplicate = findItem(state.value, newItem)\r\n\r\n            if (duplicate.length > 0) {\r\n                state.value = delItem(state.value, newItem);\r\n\r\n                state.value = [...state.value, {\r\n                    ...newItem,\r\n                    id: duplicate[0].id,\r\n                    quantity: newItem.quantity + duplicate[0].quantity,\r\n                }]\r\n            } else {\r\n                state.value = [...state.value, {\r\n                    ...newItem,\r\n                    id: state.value.length > 0 ? state.value[state.value.length - 1].id + 1 : 1\r\n                }]\r\n            }\r\n\r\n            localStorage.setItem('cartItems', JSON.stringify(sortItems(state.value)));\r\n            console.log(state.value);\r\n        },\r\n        updateItem: (state, action) => {\r\n            const itemUpdate = action.payload\r\n\r\n            const item = findItem(state.value, itemUpdate)\r\n\r\n            if (item.length > 0) {\r\n                state.value = delItem(state.value, itemUpdate);\r\n\r\n                state.value = [...state.value, {\r\n                    ...itemUpdate,\r\n                    id: item[0].id\r\n                }]\r\n                localStorage.setItem('cartItems', JSON.stringify(sortItems(state.value)));\r\n\r\n            }\r\n        }\r\n    }\r\n})\r\nconst findItem = (arr, item) => arr.filter(e => e.slug === item.slug && e.color === item.color && e.size === item.size)\r\nconst delItem = (arr, item) => arr.filter(e => e.slug !== item.slug || e.color !== item.color || e.size !== item.size)\r\n\r\n\r\nconst sortItems = (arr) => arr.sort((a, b) => a.id > b.id ? 1 : (a.id < b.id ? -1 : 0))\r\n\r\nexport const { addItem, updateItem } = cartItemsSlice.actions\r\n\r\nexport default cartItemsSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}